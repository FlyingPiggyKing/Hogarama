def mavenLabel = 'maven'
def mavenImage = '${env.JENKINS_SLAVE_IMAGE_MAVEN}'

podTemplate(cloud: 'openshift', label: mavenLabel, containers: [
  containerTemplate(name: mavenLabel, image: 'gdhet/hogarama-jenkins-slave-maven-rhel7-docker:3.5.0-jdk-8u144b01', ttyEnabled: true, command: 'cat')
  ], volumes: [
  persistentVolumeClaim(mountPath: '/.m2/repository', claimName: 'maven-repo', readOnly: false)
  ]) {

  node(mavenLabel) {
    stage('build') {
      git '${env.HOGARAMA_GIT_URL}'
      container(mavenLabel) {
          sh 'mvn clean install'
      }
    }
  }
}
